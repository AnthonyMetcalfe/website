<ng-container *ngIf="owners | async; let owners">
  <mat-tab-group *ngIf="!loading">
    <mat-tab label="Current Standings">
      <table
        mat-table
        class="table table-condensed"
        [dataSource]="owners"
        *ngIf="!loading"
      >
        <ng-container matColumnDef="user">
          <th mat-header-cell *matHeaderCellDef>User</th>
          <td mat-cell *matCellDef="let owner">{{ owner.user }}</td>
        </ng-container>
        <ng-container matColumnDef="team">
          <th mat-header-cell *matHeaderCellDef>Team</th>
          <td mat-cell *matCellDef="let owner">{{ owner.name }}</td>
        </ng-container>
        <ng-container matColumnDef="wins">
          <th mat-header-cell *matHeaderCellDef>W</th>
          <td mat-cell *matCellDef="let owner">{{ owner.wins }}</td>
        </ng-container>
        <ng-container matColumnDef="losses">
          <th mat-header-cell *matHeaderCellDef>L</th>
          <td mat-cell *matCellDef="let owner">{{ owner.losses }}</td>
        </ng-container>
        <ng-container matColumnDef="ties">
          <th mat-header-cell *matHeaderCellDef>T</th>
          <td mat-cell *matCellDef="let owner">{{ owner.ties }}</td>
        </ng-container>
        <tr
          mat-header-row
          *matHeaderRowDef="['user', 'team', 'wins', 'losses', 'ties']"
        ></tr>
        <tr
          mat-row
          *matRowDef="
            let row;
            columns: ['user', 'team', 'wins', 'losses', 'ties']
          "
        ></tr>
      </table>
    </mat-tab>
    <!--     <mat-tab label="Live Scoring" *ngIf="isMidWeek | async">
        <table mat-table class="table table-condensed" [dataSource]="liveScoring">
          <ng-container matColumnDef="user">
            <th mat-header-cell *matHeaderCellDef>User</th>
            <td mat-cell *matCellDef="let owner">{{ owner.user }}</td>
          </ng-container>
          <ng-container matColumnDef="team">
            <th mat-header-cell *matHeaderCellDef>Team</th>
            <td mat-cell *matCellDef="let owner">{{ owner.name }}</td>
          </ng-container>
          <ng-container matColumnDef="weeklyPoints">
            <th mat-header-cell *matHeaderCellDef>Score</th>
            <td mat-cell *matCellDef="let owner">
              {{ owner.weeklyPoints | number: "1.2-2" }}
            </td>
          </ng-container>
          <ng-container matColumnDef="weeklyPlayersRemaining">
            <th mat-header-cell *matHeaderCellDef>Players Remaining</th>
            <td mat-cell *matCellDef="let owner">
              {{ owner.weeklyPlayersRemaining }}
            </td>
          </ng-container>
          <tr
            mat-header-row
            *matHeaderRowDef="[
              'user',
              'team',
              'weeklyPoints',
              'weeklyPlayersRemaining'
            ]"
          ></tr>
          <tr
            mat-row
            *matRowDef="
              let row;
              columns: ['user', 'team', 'weeklyPoints', 'weeklyPlayersRemaining']
            "
          ></tr>
        </table>
      </mat-tab> -->
    <mat-tab
      *ngFor="let week of weeklyStandings; let i = index"
      [label]="'After Week ' + (i + 1)"
    >
      <table mat-table class="table table-condensed" [dataSource]="week">
        <ng-container matColumnDef="user">
          <th mat-header-cell *matHeaderCellDef>User</th>
          <td mat-cell *matCellDef="let owner">{{ owner.user }}</td>
        </ng-container>
        <ng-container matColumnDef="team">
          <th mat-header-cell *matHeaderCellDef>Team</th>
          <td mat-cell *matCellDef="let owner">{{ owner.name }}</td>
        </ng-container>
        <ng-container matColumnDef="wins">
          <th mat-header-cell *matHeaderCellDef>W</th>
          <td mat-cell *matCellDef="let owner">{{ owner.wins }}</td>
        </ng-container>
        <ng-container matColumnDef="losses">
          <th mat-header-cell *matHeaderCellDef>L</th>
          <td mat-cell *matCellDef="let owner">{{ owner.losses }}</td>
        </ng-container>
        <ng-container matColumnDef="ties">
          <th mat-header-cell *matHeaderCellDef>T</th>
          <td mat-cell *matCellDef="let owner">{{ owner.ties }}</td>
        </ng-container>
        <ng-container matColumnDef="weeklyMovement">
          <th mat-header-cell *matHeaderCellDef>Weekly Movement</th>
          <td mat-cell *matCellDef="let owner">
            <ng-container *ngIf="owner.weeklyChange > 0"
              >{{ owner.weeklyChange }}
              <mat-icon class="positive">arrow_upward</mat-icon>
            </ng-container>
            <ng-container *ngIf="owner.weeklyChange < 0"
              >{{ owner.weeklyChange * -1 }}
              <mat-icon class="negative">arrow_downward</mat-icon>
            </ng-container>
          </td>
        </ng-container>
        <tr
          mat-header-row
          *matHeaderRowDef="[
            'user',
            'team',
            'wins',
            'losses',
            'ties',
            'weeklyMovement'
          ]"
        ></tr>
        <tr
          mat-row
          *matRowDef="
            let row;
            columns: [
              'user',
              'team',
              'wins',
              'losses',
              'ties',
              'weeklyMovement'
            ]
          "
        ></tr>
      </table>
    </mat-tab>
  </mat-tab-group>

  <div *ngIf="loading">
    Loading... be patient or get better internet.
  </div>
</ng-container>
